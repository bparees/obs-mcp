kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: obs-mcp-e2e
nodes:
  - role: control-plane
    kubeadmConfigPatches:
      - |
        kind: ClusterConfiguration
        apiServer:
          extraArgs:
            "enable-admission-plugins": "NodeRestriction,MutatingAdmissionWebhook,ValidatingAdmissionWebhook"
        controllerManager:
          extraArgs:
            "bind-address": "0.0.0.0"
        scheduler:
          extraArgs:
            "bind-address": "0.0.0.0"
      - |
        kind: KubeletConfiguration
        authentication:
          webhook:
            enabled: true
        authorization:
          mode: Webhook
  - role: worker
